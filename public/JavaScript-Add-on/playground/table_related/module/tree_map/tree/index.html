<html>
<head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="./css/TreeTable.css">
</head>
<body>
<div id="old"></div>
<div class="clboth"></div>
<hr/>
预览
<div id="preview"></div>
<div class="mt100 clboth">
    <input type="button" id="set" value="设置">
    <input type="text" id="value" class="ml20 w400">
</div>
<script src="jquery/jquery-1.10.2.js"></script>
<script type="text/javascript" src="./js/TreeTable.js"></script>
<script type="text/javascript">
    //数据
    var data = {
        singletree: [
            {
                "title": "编码",
                "field": "code",
                "candidate": false
            },
            {
                "title": "名称",
                "field": "name",
                "candidate": true
            },
            {
                "title": "年龄",
                "field": "age",
                "candidate": true
            },
            {
                "title": "性别",
                "field": "sex",
                "candidate": true
            }
        ],
        doubletree: [
            {
                "title": "编码",
                "field": "code",
                "candidate": false
            },
            {
                "title": "基本信息",
                "open": true,
                "children": [
                    {
                        "title": "名称",
                        "field": "name",
                        "candidate": true
                    },
                    {
                        "title": "年龄",
                        "field": "age",
                        "candidate": true
                    },
                    {
                        "title": "性别",
                        "field": "sex",
                        "candidate": true
                    }
                ]
            },
            {
                "title": "工作信息",
                "open": true,
                "children": [
                    {
                        "title": "职位",
                        "field": "office",
                        "candidate": true
                    },
                    {
                        "title": "职称",
                        "field": "call",
                        "candidate": true
                    },
                    {
                        "title": "所在楼层",
                        "field": "place",
                        "candidate": true
                    }
                ]
            }
        ],
        threetree: [
            {
                "title": "编码",
                "field": "code",
                "candidate": false
            },
            {
                "title": "基本信息",
                "open": true,
                "children": [
                    {
                        "title": "名称",
                        "field": "name",
                        "candidate": true
                    },
                    {
                        "title": "年龄",
                        "field": "age",
                        "candidate": true
                    },
                    {
                        "title": "性别",
                        "field": "sex",
                        "candidate": true
                    },
                    {
                        "title": "教育相关",
                        "open": true,
                        "children": [
                            {
                                "title": "最高学历",
                                "field": "education",
                                "candidate": true
                            },
                            {
                                "title": "毕业学校",
                                "field": "college",
                                "candidate": true
                            }
                        ]
                    }
                ]
            },
            {
                "title": "工作信息",
                "open": true,
                "children": [
                    {
                        "title": "职位",
                        "field": "office",
                        "candidate": true
                    },
                    {
                        "title": "职称",
                        "field": "call",
                        "candidate": true
                    },
                    {
                        "title": "所在楼层",
                        "field": "place",
                        "candidate": true
                    }
                ]
            }
        ]
    };

    //表格树初始化
    TreeTable.init(data.threetree, $("#old"), {
        previewTargets: ["#preview"]
    });

    //设置按钮
    $("#set").click(function () {
        var selectValue = "";
        $("#preview").find("span").each(function () {
            var _this = $(this);
            if (_this.attr("field") != null && _this.attr("field") !== "code") {
                selectValue += '"' + _this.attr("field") + '",';
            }
            ;
        });
        if (selectValue.length != 0) {
            selectValue = "[" + selectValue.substring(0, selectValue.length - 1) + "]";
        }
        $("#value").val(selectValue);
    });
</script>
</body>
</html>